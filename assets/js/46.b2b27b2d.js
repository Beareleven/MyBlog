(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{604:function(t,a,e){"use strict";e.r(a);var s=e(13),v=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("meta",{attrs:{name:"referrer",content:"no-referrer"}}),t._v(" "),e("p",[e("a",{attrs:{name:"tOiGE"}})]),t._v(" "),e("h2",{attrs:{id:"什么是dns"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#什么是dns"}},[t._v("#")]),t._v(" 什么是DNS？")]),t._v(" "),e("p",[t._v("DNS全称是 "),e("code",[t._v("Domain Name System")]),t._v("，域名系统。他是一个由分层"),e("code",[t._v("DNS服务器")]),t._v("实现的分布式数据库；他还是一个使得主机能够"),e("code",[t._v("查询分布式数据库的应用层协议")]),t._v("，DNS协议"),e("code",[t._v("运行在UDP之上")]),t._v("，使用"),e("code",[t._v("53")]),t._v("端口。\n"),e("a",{attrs:{name:"v9T63"}})]),t._v(" "),e("h2",{attrs:{id:"dns解析过程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dns解析过程"}},[t._v("#")]),t._v(" DNS解析过程？")]),t._v(" "),e("p",[t._v("当你在浏览器输入一个url"),e("code",[t._v("www.beareleven.cn/index.html")]),t._v("并回车时。为了使用户主机能够将一个HTTP请求报文发送到Web服务器，会经历以下操作：")]),t._v(" "),e("ol",[e("li",[t._v("用户主机上运行着DNS应用到客户端")]),t._v(" "),e("li",[t._v("浏览器从上述URL中抽取出主机名"),e("code",[t._v("www.beareleven.cn")]),t._v(",并将这台主机名传给DNS应用到客户端")]),t._v(" "),e("li",[t._v("DNS客户端向DNS服务器发送一个包含主机名的请求\n"),e("ol",[e("li",[t._v("查询进入网络，并且有DNS解析器进行接收")]),t._v(" "),e("li",[t._v("DNS解析器向"),e("code",[t._v("根域名服务器")]),t._v("发起查询请求，要求返回顶级域名的地址\n"),e("ol",[e("li",[e("code",[t._v("根DNS服务器")]),t._v("会注意到请求地址的前缀并向DNS解析起返回"),e("code",[t._v("cn")]),t._v("的"),e("code",[t._v("TLD服务器IP地址列表")])])])]),t._v(" "),e("li",[t._v("DNS解析器向"),e("code",[t._v("TLD服务器")]),t._v("发送请求报文\n"),e("ol",[e("li",[e("code",[t._v("TLD服务器")]),t._v("接收请求后，会根据域名地址把"),e("code",[t._v("权威DNS服务器")]),t._v("的IP地址返回给DNS解析器")])])]),t._v(" "),e("li",[t._v("最后，DNS解析器将查询直接发送到"),e("code",[t._v("权威DNS服务器")]),t._v(" "),e("ol",[e("li",[e("code",[t._v("权威DNS服务器")]),t._v("将IP地址返回给DNS解析器")])])]),t._v(" "),e("li",[e("code",[t._v("**DNS解析器将会使用IP地址去响应Web浏览器**")])])])]),t._v(" "),e("li",[t._v("DNS客户端最终会收到一份响应报文，其中包含该目标主机的IP地址")]),t._v(" "),e("li",[t._v("浏览器收到目标主机的IP地址后，就可以向位于该IP地址80端口的HTTP服务器进程发起一个TCP连接")])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2022/png/1645656/1649988161563-abfa53ed-43f2-4346-ac4e-a4ec89433210.png#clientId=ue0b09e34-d4d3-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=339&id=u4a3eb718&margin=%5Bobject%20Object%5D&name=image.png&originHeight=678&originWidth=1304&originalType=binary&ratio=1&rotation=0&showTitle=false&size=199165&status=done&style=none&taskId=uef4fd1da-47da-4ace-9c04-7a53b8ee9a1&title=&width=652",alt:"image.png"}}),t._v(" "),e("a",{attrs:{name:"fsFoC"}})]),t._v(" "),e("h2",{attrs:{id:"除了提供ip地址到主机名的转换-dns还提供了什么服务"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#除了提供ip地址到主机名的转换-dns还提供了什么服务"}},[t._v("#")]),t._v(" 除了提供IP地址到主机名的转换，DNS还提供了什么服务？")]),t._v(" "),e("ol",[e("li",[t._v("主机别名：有着复杂的主机名的主机能够拥有一个或多个其他别名")]),t._v(" "),e("li",[t._v("邮件服务器别名")]),t._v(" "),e("li",[t._v("负载分配：DNS 也用于冗余的服务器之间进行负载分配。繁忙的站点例如 cnn.com 被冗余分布在多台服务器上，每台服务器运行在不同的端系统之间，每个都有着不同的 IP 地址。由于这些冗余的 Web 服务器，一个 IP 地址集合因此与同一个规范主机名联系。DNS 数据库中存储着这些 IP 地址的集合。由于客户端每次都会发起HTTP请求，所以DNS就会在所有的这些冗余的Web服务器之间循环分配了负载\n"),e("a",{attrs:{name:"QpUmq"}})])]),t._v(" "),e("h2",{attrs:{id:"dns是如何工作的"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dns是如何工作的"}},[t._v("#")]),t._v(" DNS是如何工作的？")]),t._v(" "),e("p",[t._v("运行在用户主机上的某些应用需要将主机名转换成IP地址。这些应用将调用DNS的客户端，并指明需要被转换的主机名。用户主机上的DNS收到后，会使用"),e("code",[t._v("UDP通过53端口")]),t._v("向网络上发送一个查询报文，经过一段时间过后，用户主机上的DNS会收到一个主机名对应的DNS响应报文。\n"),e("a",{attrs:{name:"Ym1ao"}})]),t._v(" "),e("h2",{attrs:{id:"dns层次结构"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dns层次结构"}},[t._v("#")]),t._v(" DNS层次结构")]),t._v(" "),e("ul",[e("li",[t._v("根DNS服务器：根服务器会提供TLD（Top- Levle Domain）DNS服务器的IP，如"),e("code",[t._v(".com, .cn等等")]),t._v("的IP地址")]),t._v(" "),e("li",[t._v("顶级域DNS服务器：对于每个顶级域名如"),e("code",[t._v("com, cn, edu, net")]),t._v("等都有TLD服务器或者服务器集群，TLD服务器提供了权威服务器都IP地址")]),t._v(" "),e("li",[t._v("权威DNS服务器：在因特网上具有公共可访问的主机，这些主机的组织机构必须提供可供访问的DNS记录，这些记录将主机的名字映射为IP地址\n"),e("a",{attrs:{name:"bcdYU"}})])]),t._v(" "),e("h2",{attrs:{id:"dns查询类型有什么-递归查询-迭代查询"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dns查询类型有什么-递归查询-迭代查询"}},[t._v("#")]),t._v(" DNS查询类型有什么？递归查询？迭代查询？")]),t._v(" "),e("ul",[e("li",[t._v("迭代查询：在迭代查询中，如果所查询的 DNS 服务器与查询名称不匹配，则其将返回对较低级别域名空间具有权威性的 DNS 服务器的引用。然后，DNS 客户端将对引用地址进行查询。此过程继续使用查询链中的其他 DNS 服务器，直至发生错误或超时为止")])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2022/png/1645656/1649997548271-b17745ca-573f-46cc-b077-cffc174aa3d5.png#clientId=ue0b09e34-d4d3-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=374&id=uddeb322b&margin=%5Bobject%20Object%5D&name=image.png&originHeight=747&originWidth=1304&originalType=binary&ratio=1&rotation=0&showTitle=false&size=236822&status=done&style=none&taskId=ubd592759-8c66-479e-87cd-7a8b9cc8221&title=&width=652",alt:"image.png"}})]),t._v(" "),e("ul",[e("li",[t._v("递归查询：在递归查询中，DNS 客户端要求 DNS 服务器（一般为 DNS 递归解析器）将使用所请求的资源记录响应客户端，或者如果解析器无法找到该记录，则返回错误消息。")])]),t._v(" "),e("p",[e("img",{attrs:{src:"https://cdn.nlark.com/yuque/0/2022/png/1645656/1649997541035-dea6f7f3-698f-4435-8353-eeb46ee556cc.png#clientId=ue0b09e34-d4d3-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=338&id=V7vyw&margin=%5Bobject%20Object%5D&name=image.png&originHeight=675&originWidth=1304&originalType=binary&ratio=1&rotation=0&showTitle=false&size=183131&status=done&style=none&taskId=u81a62535-4ca4-4c22-b33b-b5ca3bf6cc1&title=&width=652",alt:"image.png"}})]),t._v(" "),e("p",[e("a",{attrs:{name:"XdERc"}})]),t._v(" "),e("h2",{attrs:{id:"dns缓存"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dns缓存"}},[t._v("#")]),t._v(" DNS缓存")]),t._v(" "),e("p",[t._v("DNS缓存也叫DNS解析器缓存，是由操作系统维护的临时数据库，包含有最近的网站和其他Internet域的访问记录。也就是说，DNS缓存是计算机为了满足快速的响应速度而把加载过的资源缓存起来，再次访问时可以直接快速引用的一项技术和手段。\n"),e("a",{attrs:{name:"m9BcC"}})]),t._v(" "),e("h3",{attrs:{id:"dns缓存的工作流程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dns缓存的工作流程"}},[t._v("#")]),t._v(" DNS缓存的工作流程")]),t._v(" "),e("p",[t._v("在浏览器向外部发出请求之前，计算机会拦截每个请求并在 DNS 缓存数据库中查找域名，该数据库包含有最近的域名列表，以及 DNS 首次发出请求时 DNS 为它们计算的地址。\n"),e("a",{attrs:{name:"TKxGc"}})]),t._v(" "),e("h3",{attrs:{id:"dns的缓存方式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dns的缓存方式"}},[t._v("#")]),t._v(" DNS的缓存方式")]),t._v(" "),e("p",[t._v("DNS数据可以缓存到各种不同的位置上，每个位置均将存储DNS记录，他的生存时间由TTL（DNS字段）来决定\n"),e("a",{attrs:{name:"Upfuj"}})]),t._v(" "),e("h4",{attrs:{id:"浏览器缓存"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#浏览器缓存"}},[t._v("#")]),t._v(" 浏览器缓存")]),t._v(" "),e("p",[t._v("现如今的 Web 浏览器设计默认将 DNS 记录缓存一段时间。因为越靠近 Web 浏览器进行 DNS 缓存，为检查缓存并向 IP 地址发出请求的次数就越少。发出对 DNS 记录的请求时，浏览器缓存是针对所请求的记录而检查的第一个位置。\n"),e("a",{attrs:{name:"xSYbP"}})]),t._v(" "),e("h4",{attrs:{id:"操作系统内核缓存"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#操作系统内核缓存"}},[t._v("#")]),t._v(" 操作系统内核缓存")]),t._v(" "),e("p",[t._v("在浏览器缓存查询后，会进行操作系统级 DNS 解析器的查询，操作系统级 DNS 解析器是 DNS 查询离开你的计算机前的第二站，也是本地查询的最后一个步骤。\n"),e("a",{attrs:{name:"Cq37g"}})]),t._v(" "),e("h2",{attrs:{id:"dns安全"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dns安全"}},[t._v("#")]),t._v(" DNS安全")]),t._v(" "),e("p",[t._v("几乎所有的网络请求都会经过 DNS 查询，而且 DNS 和许多其他的 Internet 协议一样，系统设计时并未考虑到安全性，并且存在一些设计限制，这为 DNS 攻击创造了机会。")]),t._v(" "),e("ol",[e("li",[t._v("Dos攻击：这种攻击的主要形式是"),e("strong",[t._v("使重要的 DNS 服务器比如 TLD 服务器或者根域名服务器过载")]),t._v("，从而无法响应权威服务器的请求，使 DNS 查询不起作用")]),t._v(" "),e("li",[t._v("DNS欺骗：通过改变 DNS 资源内容，比如"),e("strong",[t._v("伪装一个官方的 DNS 服务器，回复假的资源记录")]),t._v("，从而导致主机在尝试与另一台机器连接时，连接至错误的 IP 地址")]),t._v(" "),e("li",[t._v("DNS劫持：在 DNS 劫持中，攻击者"),e("strong",[t._v("将查询重定向到其他域名服务器")]),t._v("。这可以通过恶意软件或未经授权的 DNS 服务器修改来完成。尽管结果类似于 DNS 欺骗，但这是完全不同的攻击，因为它的目标是名称服务器上网站的 DNS 记录，而不是解析程序的缓存")]),t._v(" "),e("li",[t._v("DDoS攻击：也叫做分布式拒绝服务带宽洪泛攻击，这种攻击形式相当于是 Dos 攻击的升级版\n"),e("a",{attrs:{name:"Kk2KP"}})])]),t._v(" "),e("h3",{attrs:{id:"dnssec"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dnssec"}},[t._v("#")]),t._v(" DNSSEC")]),t._v(" "),e("p",[t._v("DNSSEC 又叫做 DNS 安全扩展，DNSSEC 通过对数据进行数字签名来保护其有效性，从而防止受到攻击。它是由 IETF 提供的一系列 DNS 安全认证的机制。"),e("strong",[t._v("DNSSEC 不会对数据进行加密，它只会验证你所访问的站点地址是否有效。")]),t._v(" "),e("a",{attrs:{name:"Cd9to"}})]),t._v(" "),e("h3",{attrs:{id:"dns防火墙"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dns防火墙"}},[t._v("#")]),t._v(" DNS防火墙")]),t._v(" "),e("p",[t._v("有一些攻击是针对服务器进行的，这就需要 DNS 防火墙的登场了，DNS 防火墙是一种可以为 DNS 服务器提供许多安全和性能服务的工具。"),e("strong",[t._v("DNS 防火墙位于用户的 DNS 解析器和他们尝试访问的网站或服务的权威名称服务器之间。防火墙提供限速访问，以关闭试图淹没服务器的攻击者")]),t._v("。如果服务器确实由于攻击或任何其他原因而导致停机，则 DNS 防火墙可以通过提供来自缓存的 DNS 响应来使操作员的站点或服务正常运行。")]),t._v(" "),e("Vssue",{attrs:{title:t.$title,"issue-id":5}})],1)}),[],!1,null,null,null);a.default=v.exports}}]);